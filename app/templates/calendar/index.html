{% extends "base.html" %}

{% block title %}è¡Œäº‹æ›†{% endblock %}

{% block content %}
 <h1>ðŸ“… æˆ‘çš„è¡Œäº‹æ›†</h1>
    <div id="calendar"></div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const calendarEl = document.getElementById("calendar");

            const calendar = new FullCalendar.Calendar(calendarEl, {
                initialView: "dayGridMonth",
                selectable: true,
                events: "/calendar/events",

                // é»žé¸æ—¥æœŸ -> æ–°å¢žäº‹ä»¶
                select: function (info) {
                    const title = prompt("äº‹ä»¶æ¨™é¡Œï¼š");
                    if (title) {
                        axios.post("/calendar/events", {
                            title: title,
                            start: info.startStr,
                            end: info.endStr || info.startStr
                        }).then(res => {
                            calendar.refetchEvents();
                        }).catch(err => {
                            alert("æ–°å¢žå¤±æ•—");
                        });
                    }
                },

                eventClick: function(info) {
                    alert("äº‹ä»¶ï¼š" + info.event.title);
                }
            });

            calendar.render();
        });
    </script>
{% endblock %}